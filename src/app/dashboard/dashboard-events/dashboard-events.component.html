<div *appLoading="isLoading" class="wrapper padding-20">
  <anms-error-message *ngIf="isErrorOccured" [message]="error" (retry)="fetch()"></anms-error-message>

  <ng-container *ngIf="!isErrorOccured">
    <table mat-table [dataSource]="events" class="mat-elevation-z5">
      <ng-container matColumnDef="action">
        <td mat-cell *matCellDef="let element">
          <button mat-button mat-icon-button>
            <mat-icon>flag</mat-icon>
          </button>
        </td>
      </ng-container>

      <ng-container matColumnDef="title">
        <td mat-cell *matCellDef="let element">
          <div class="name">{{element.data.title}}</div>
          <small>{{element.data.createdDate | jalali}}</small>
        </td>
      </ng-container>

      <ng-container matColumnDef="description">
        <td mat-cell *matCellDef="let element">
          <div class="description with-icon">
            <mat-icon>{{element.data.type | lowercase}}</mat-icon>
            {{(element.data.description.length>40)? (element.data.description | slice:0:40)+'..':(element.data.description)}}
          </div>
          <span class="position">{{element.include.user.firstName}} {{element.include.user.lastName}}</span>
        </td>
      </ng-container>

      <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="showDetail()"></tr>
    </table>
  </ng-container>
</div>
